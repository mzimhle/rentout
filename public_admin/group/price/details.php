<?php/* Add this on all pages on top. */set_include_path($_SERVER['DOCUMENT_ROOT'].'/'.PATH_SEPARATOR.$_SERVER['DOCUMENT_ROOT'].'/library/classes/');/*** Standard includes */require_once 'config/database.php';require_once 'config/smarty.php';/*** Check for login */require_once 'includes/auth.php';/* objects. */require_once 'class/price.php';require_once 'class/group.php';$priceObject 	= new class_price();$groupObject	= new class_group();if (isset($_GET['code']) && trim($_GET['code']) != '') {		$code = trim($_GET['code']);		$priceData = $priceObject->getByCode($code);		if($priceData) {		$smarty->assign('priceData', $priceData);	} else {		header('Location: /group/price/');		exit;			}}$grouppairs = $groupObject->pairs();if($grouppairs) $smarty->assign('grouppairs', $grouppairs);/* Check posted data. */if(count($_POST) > 0) {	$errorArray		= array();	$data 				= array();	$formValid		= true;	$success			= NULL;	$areaByName	= NULL;		if(isset($_POST['price_cost']) && (int)trim($_POST['price_cost']) == 0) {		$errorArray['price_cost'] = 'Price is required';		$formValid = false;			}		if(isset($_POST['group_code']) && trim($_POST['group_code']) == '') {		$errorArray['group_code'] = 'Group is required';		$formValid = false;			}		if(count($errorArray) == 0 && $formValid == true) {				$data 	= array();			$data['price_cost']		= trim($_POST['price_cost']);						$data['group_code']	= trim($_POST['group_code']);					$success = $priceObject->insert($data);				if(count($errorArray) == 0) {			header('Location: /group/price/');				exit;				}					}		/* if we are here there are errors. */	$smarty->assign('errorArray', $errorArray);	}$smarty->display('group/price/details.tpl');?>